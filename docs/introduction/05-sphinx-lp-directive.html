
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Sphinx LP Directive &#8212; rst-literate 0.0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Development Task List" href="../development-tasks.html" />
    <link rel="prev" title="reStructuredText Block Structure" href="04-rst-block-structure.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="sphinx-lp-directive">
<h1>Sphinx LP Directive<a class="headerlink" href="#sphinx-lp-directive" title="Permalink to this headline">¶</a></h1>
<p>Read time: 3.9 minutes (390 words)</p>
<p>To get Sphinx to process <em>Literate Programming</em> blocks, we need a new directive. For simplicity,
this directive will be named <strong>pylit</strong> and have this structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">The</span> <span class="n">argument</span> <span class="n">on</span> <span class="n">the</span> <span class="n">directive</span> <span class="n">line</span> <span class="n">will</span> <span class="n">identify</span> <span class="n">the</span> <span class="n">language</span> <span class="n">used</span> <span class="n">by</span> <span class="n">the</span> <span class="n">block</span>

<span class="o">*</span> <span class="n">The</span> <span class="o">**</span><span class="n">caption</span><span class="o">**</span> <span class="n">option</span> <span class="n">will</span> <span class="n">name</span> <span class="n">the</span> <span class="n">block</span>

        <span class="o">**</span> <span class="n">Caption</span> <span class="n">text</span> <span class="n">must</span> <span class="n">be</span> <span class="n">formed</span> <span class="n">formally</span> <span class="p">(</span><span class="n">see</span> <span class="n">below</span><span class="p">)</span>

<span class="o">*</span> <span class="n">Lines</span> <span class="n">can</span> <span class="n">be</span> <span class="n">numbered</span> <span class="n">using</span> <span class="o">**</span><span class="n">linenos</span><span class="o">**</span>
</pre></div>
</div>
<p>The <strong>caption</strong> line must be formed as follows:</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">caption</dt>
<dd class="field-odd"><p>&lt;type&gt;: caption text</p>
</dd>
</dl>
</div></blockquote>
<p>Where &lt;type&gt; is one of four basic <em>Literate Programming</em> block types:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p><strong>file</strong> - marks the beginning of a file. The caption provides the path</p></li>
<li><p><strong>code</strong> - marks the start of a named block of code. The caption provides the name</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><strong>add</strong> - extends either an existing <strong>file</strong> or <strong>code</strong> block list,
adding this block to the end of the list</p></li>
<li><p><strong>shell</strong> - content is a set of shell commands to be executed. The code
existing in the build directory may be run, but that code may change later
in the document. The output will be placed in the text below the command
list</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If either a <strong>file</strong> or a <strong>code</strong> block is repeated in the text, the
original named block list is discarded and a new one started. Subsequent
references to these names will expand with the new content/</p>
</div>
<div class="section" id="cross-referencing-blocks">
<h2>Cross Referencing Blocks<a class="headerlink" href="#cross-referencing-blocks" title="Permalink to this headline">¶</a></h2>
<p>ALl blocks in a document are numbered sequentially, beginning at the root of the document. When a block is referenced in another block, that reference is used to create a cross reference in the final output. Following Knuth’s examples, when you define any named block, we create a link point to that place in the document. When that named block is used, we ceate a list of “used in” references at the end of the first defining block. At the end of the document, we can creqate a full list of named blocks, together with a cross reference list showing where that block was used.</p>
<p>References to a named block are included in code using special comments that look like this:</p>
<blockquote>
<div><ul class="simple">
<li><p>#&lt;&lt;block name&gt;&gt;</p></li>
</ul>
</div></blockquote>
<p>The notation chosen depends on the line comment marker for the chosen language. If the block has not been defined, the include marker will remain in the expanded code as a comment.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Consider changing <strong>pylit</strong> to a domain name, and make the directive refer
to the block kind. Captions would become just the label needed to identify
the block list.</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>We need additional directives to generate a list of blocks, similar to a list of figures.</p>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Code blocks should be numbered and cross referenced in the document. Only
the root block in a list needs this number, (Chek Knuth’s notes on this).</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">rst-literate</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01-concepts.html">Literate Programming and reStructuredText</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-project-setup.html">Starting a Python project</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-git-store.html">The Git Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-rst-block-structure.html">reStructuredText Block Structure</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Sphinx LP Directive</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cross-referencing-blocks">Cross Referencing Blocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../development-tasks.html">Development Task List</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="04-rst-block-structure.html" title="previous chapter">reStructuredText Block Structure</a></li>
      <li>Next: <a href="../development-tasks.html" title="next chapter">Development Task List</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Roie R. Black.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/introduction/05-sphinx-lp-directive.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>